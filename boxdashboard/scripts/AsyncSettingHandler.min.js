$(document).ready(function(){function g(a){var d=$("#settings-template").html();a=Template7.compile(d)(a);$("#settings-loadon").html(a)}function h(a,d,e){e=void 0===e?null:e;if("fetch"==d)try{$.ajax({url:a,method:"GET",success:function(b){g(b);k()},error:function(b,c,f){console.error("Error during settings load: "+f)},timeout:1E4,dataType:"json"})}catch(b){console.error("Error during settings load")}else if("update"==d)try{$.ajax({url:a,method:"POST",data:JSON.stringify(e),contentType:"application/json",
success:function(b){g(b);k();$("#unapplied-changes").hide()},error:function(b,c,f){console.error("Error during settings load"+f)},timeout:1E4,dataType:"json"})}catch(b){console.error("Error during settings load")}}function k(){$(".setting-toggle").on("change",function(){var a=$(this).data().target;a=$(a);$(a).prop("hidden",function(d,e){return!e})})}var l="settingloader.php?cid="+function(a){var d=a?a.split("?")[1]:window.location.search.slice(1);a={};if(d){d=d.split("#")[0];d=d.split("&");for(var e=
0;e<d.length;e++){var b=d[e].split("="),c=b[0];b="undefined"===typeof b[1]?!0:b[1];c=c.toLowerCase();"string"===typeof b&&(b=b.toLowerCase());if(c.match(/\[(\d+)?\]$/)){var f=c.replace(/\[(\d+)?\]/,"");a[f]||(a[f]=[]);c.match(/\[\d+\]$/)?(c=/\[(\d+)\]/.exec(c)[1],a[f][c]=b):a[f].push(b)}else a[c]?(a[c]&&"string"===typeof a[c]&&(a[c]=[a[c]]),a[c].push(b)):a[c]=b}}return a}().cid;h(l,"fetch");$("#settings-apply-form").on("submit",function(a){a.preventDefault();a=$(this).serializeArray();$("#settings-apply-form-id").val();
a=a.concat($("#settings-apply-form input[type=checkbox]:not(:checked)").map(function(){return{name:this.name,value:"false"}}).get());h(l,"update",a)});$("#settings-apply-form").on("change keyup",function(){$("#unapplied-changes").show()})});
